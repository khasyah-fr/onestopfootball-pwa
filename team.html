<!--CHANGE FUNCTION NAMES, COMMENTS, CONTENTS, AND FEELS IF NEEDED-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>One Stop Football</title>
    <meta name="description" content="One Stop Football" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://khasyah-fr.github.io/onestopfootball-pwa/css/materialize.min.css" />
    <link rel="stylesheet" href="https://khasyah-fr.github.io/onestopfootball-pwa/css/styles.css" />
    <link rel="manifest" href="https://khasyah-fr.github.io/onestopfootball-pwa/manifest.json" />
    <link rel="icon" href="https://khasyah-fr.github.io/onestopfootball-pwa/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="https://khasyah-fr.github.io/onestopfootball-pwa/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="https://khasyah-fr.github.io/onestopfootball-pwa/icons/timericon.png" />
    <meta name="theme-color" content="#7F5A83" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <!-- Navigasi -->
    <nav role="navigation">
      <div class="nav-wrapper container">
        <a id="logo-container" href="https://khasyah-fr.github.io/onestopfootball-pwa" class="brand-logo logoFont">OSF</a>
        <span>
          <button
            onclick="history.back()"
            class="btn-flat white-text sidenav-trigger"
            data-target="nav-mobile"
          >
            <i class="material-icons">arrow_back</i>
          </button>
        </span>

        <ul class="topnav right hide-on-med-and-down"></ul>
        <ul id="nav-mobile" class="sidenav"></ul>
      </div>
    </nav>
    <!-- Akhir Navigasi -->

    <div class="content" style="display: none">
      <!-- Content -->
      <div class="container" id="body-content">
        <div class="col s12">
          <h4 class="center-align">Detail Team</h4>
        </div>
        <div class="col s12 white-text">
          <div class="row" id="team">
            <!-- Team details should be here. -->
          </div>
        </div>

        <div class="col s12 white-text">
          <div>
            <ul class="collapsible" id="next-match">
              <!-- Data Next Match -->
              <li class="collection-item avatar">
                <div
                  class="row grey darken-4 valign-wrapper"
                  style="margin: 0px"
                >
                  <div class="col m3"></div>
                  <div class="col s12 m6 center-align score">
                    <h6>Next Match</h6>
                  </div>
                  <div class="col m3"></div>
                </div>
              </li>
              <li class="collection-item avatar">
                <div
                  class="row grey darken-4 valign-wrapper take-me"
                  style="margin: 0px; padding-top: 20px; display: none"
                >
                  <div class="col m3"></div>
                  <div class="col s12 m6 center-align score">
                    <img
                      src="./img/liga/404.png"
                      alt="not found"
                      class="responsive-img img-home"
                      style="height: 50px"
                    />
                    <p>Tidak ada pertandingan</p>
                  </div>
                  <div class="col m3"></div>
                </div>
              </li>
            </ul>
            <div class="white-text center-align">
              <button
                class="indigo darken-4 waves-effect waves-light btn-large"
                type="button"
                id="btnLoadNext"
              >
                Load Data Next Match
              </button>
            </div>
            <br />
            <ul class="collapsible" id="last-match">
              <!-- Data Last Match -->
              <li class="collection-item avatar">
                <div
                  class="row grey darken-4 valign-wrapper"
                  style="margin: 0px"
                >
                  <div class="col m3"></div>
                  <div class="col s12 m6 center-align score">
                    <h6>Last Match</h6>
                  </div>
                  <div class="col m3"></div>
                </div>
              </li>
              <li class="collection-item avatar">
                <div
                  class="row grey darken-4 valign-wrapper took-me"
                  style="margin: 0px; padding-top: 20px; display: none"
                >
                  <div class="col m3"></div>
                  <div class="col s12 m6 center-align score">
                    <img
                      src="./img/liga/404.png"
                      alt="not found"
                      class="responsive-img img-home"
                      style="height: 50px"
                    />
                    <p>Tidak ada pertandingan</p>
                  </div>
                  <div class="col m3"></div>
                </div>
              </li>
            </ul>
            <div class="white-text center-align">
              <button
                class="indigo darken-4 waves-effect waves-light btn-large"
                type="button"
                id="btnLoadMore"
              >
                Load Data Last Match
              </button>
            </div>
          </div>
        </div>
        <br />
        <br />

        <div class="preloader-wrapper big active" style="display: block">
          <div class="spinner-layer spinner-blue-only">
            <div class="circle-clipper left">
              <div class="circle"></div>
            </div>
            <div class="gap-patch">
              <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
              <div class="circle"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- Akhir Content -->
      <!-- Awal footer -->
      <footer class="page-footer footerColor">
        <div class="container">
          <div class="row">
            <div class="col l6 s12">
              <h5 class="white-text logoFont">OSF</h5>
              <p class="grey-text text-lighten-4">
                One Stop Football adalah website penyedia informasi sepakbola
                dari berbagai liga populer di dunia.<br /><br />
              </p>
            </div>

            <div class="col l4 offset-l2 s12">
              <h5 class="sosmed white-text">Contact</h5>
              <a
                aria-label="github"
                target="_blank"
                rel="noopener"
                href="https://github.com/khasyah-fr"
              >
                <i class="fab fa-github-square"></i>
              </a>
              <a
                aria-label="linkedin"
                target="_blank"
                rel="noopener"
                href="https://linkedin.com/in/fitra-rahmani"
              >
                <i class="fab fa-linkedin"></i>
              </a>
            </div>
          </div>
        </div>
      </footer>
      <!-- Akhir footer-->
      
      <div>
        <div class="fixed-action-btn">
          <a class="btn-floating btn-large red darken-3" id="delete">
            <i class="large material-icons">delete</i>
          </a>
        </div>

        <div class="fixed-action-btn">
          <button
            class="btn-floating btn-large indigo darken-4 pulse"
            id="save"
          >
            <i class="large material-icons">save</i>
          </button>
        </div>
      </div>
    </div>

    <script src="js/materialize.min.js"></script>
    <script src="js/api.js"></script>
    <script src="js/getTeam.js"></script>
    <script src="js/getLastMatch.js"></script>
    <script src="js/getNextMatch.js"></script>
    <script src="js/getSavedTeam.js"></script>
    <script src="js/idb/lib/idb.js"></script>
    <script src="js/osf_db.js"></script>
    <script>
      window.onload = function () {
        setTimeout(function () {
          document.querySelector(".content").style.display = "block";
          document.querySelector(".preloader-wrapper").style.display = "none";
        }, 2000);
      };
      // REGISTER SERVICE WORKER
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", function () {
          navigator.serviceWorker
            .register("service-worker.js")
            .then(function () {
              console.log("Pendaftaran ServiceWorker berhasil");
            })
            .catch(function () {
              console.log("Pendaftaran ServiceWorker gagal");
            });
        });
      } else {
        console.log("ServiceWorker belum didukung browser ini.");
      }

      document.addEventListener("DOMContentLoaded", function () {
        getNextMatch();
        getLastMatch();

        // COLLAPSE
        var collapse = document.querySelectorAll(".collapsible");
        M.Collapsible.init(collapse);

        var urlParams = new URLSearchParams(window.location.search);
        var idTeam = Number(urlParams.get("id"));

        var save = document.getElementById("save");
        var del = document.getElementById("delete");

        var item = getTeam();

        checkFavorite(idTeam)
          .then((msg) => {
            console.log(msg);
            save.style.display = "none";
            del.style.display = "block";
          })
          .catch((msg) => {
            console.log(msg);
            save.style.display = "block";
            del.style.display = "none";
          });

        save.onclick = function () {
          console.log("Tombol save di klik.");
          item.then(function (team) {
            saveFavTeam(team);
          });
          save.style.display = "none";
          del.style.display = "block";
        };

        del.onclick = function () {
          console.log("Tombol delete di klik.");
          deleteFavTeam(idTeam);
          del.style.display = "none";
          save.style.display = "block";
        };
      });
    </script>
  </body>
</html>
